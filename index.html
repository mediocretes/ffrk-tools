<html ng-app="ffrk-io">

<head>
    <title>FF Record Keeper - Inventory Optimiser</title>
    <link rel=stylesheet type="text/css" href="css/style.css"/>
    <link rel="stylesheet" href="/bower_components/font-awesome/css/font-awesome.min.css">
    <script src="/bower_components/angular/angular.min.js"></script>
    <script src="/bower_components/angular-sanitize/angular-sanitize.min.js"></script>
    <script src="/bower_components/angular-translate/angular-translate.min.js"></script>
    <script src="/bower_components/angular-translate-loader-static-files/angular-translate-loader-static-files.min.js"></script>
    <script src="/bower_components/lodash/lodash.min.js"></script>
    <script src="/js/name.js"></script>
    <script src="/js/suggest.js"></script>
    <script src="/js/item.js"></script>
    <script src="/js/app.js"></script>
</head>

<body ng-controller="AppController as app">
<div class="menu">
    <div ng-hide="app.loaded">{{'Loading'|translate}}</div>
    <div class="section search">
        <input type="text" placeholder="{{'Add item'|translate}}" ng-keyup="app.findSuggestions($event)"
               ng-model="app.typingName"/>
    </div>
    <div class="section suggested">
        <a href="" ng-repeat="suggest in app.suggested" ng-class="{selected: $index == app.selected}" ng-click="app.chooseSuggest(suggest)">
            {{suggest.name.formatted()}}
        </a>
    </div>
    <div class="section optimize">
        <div class="title">{{'Actions'|translate}}</div>
        <a href="" ng-click="app.optimize()">{{'Optimize'|translate}}</a><br />
        <a href="" ng-click="app.reset()">{{'Reset'|translate}}</a>
    </div>
    <div class="section language">
        <div class="title">{{'Languages'|translate}}</div>
        <a href="" ng-click="app.changeLang('en')"
           ng-class="{selected: app.lang == 'en'}">{{'English'|translate}}</a><br/>
        <a href="" ng-click="app.changeLang('fr')" ng-class="{selected: app.lang == 'fr'}">{{'French'|translate}}</a>
    </div>
</div>
<div class="main">
    <table>
        <tr>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th colspan="7" class="stat_base">{{'current'|translate}}</th>
            <th colspan="7" class="stat_synergy">{{'synergy'|translate}}</th>
        </tr>
        <tr>
            <th>{{'name'|translate}}</th>
            <th>{{'origin'|translate}}</th>
            <th>{{'rarity'|translate}}</th>
            <th>{{'type'|translate}}</th>
            <th>{{'level'|translate}}</th>

            <th class="stat_base">atk</th>
            <th class="stat_base">mag</th>
            <th class="stat_base">acc</th>
            <th class="stat_base">def</th>
            <th class="stat_base">res</th>
            <th class="stat_base">eva</th>
            <th class="stat_base">mnd</th>

            <th class="stat_synergy">atk</th>
            <th class="stat_synergy">mag</th>
            <th class="stat_synergy">acc</th>
            <th class="stat_synergy">def</th>
            <th class="stat_synergy">res</th>
            <th class="stat_synergy">eva</th>
            <th class="stat_synergy">mnd</th>
        </tr>
        <tr ng-repeat="item in app.inventory track by $index" ng-class="{toRemove: item.toRemove}">
            <td>{{item.name.translated}}</td>
            <td>{{item.origin}}</td>
            <td>{{item.rarity}}</td>
            <td>{{item.type}}</td>
            <td class="level"><input type="text" ng-keyup="app.saveInventory()" ng-model="item.level"/></td>

            <td class="stat_base">{{item.curr('atk')}}</td>
            <td class="stat_base">{{item.curr('mag')}}</td>
            <td class="stat_base">{{item.curr('acc')}}</td>
            <td class="stat_base">{{item.curr('def')}}</td>
            <td class="stat_base">{{item.curr('res')}}</td>
            <td class="stat_base">{{item.curr('eva')}}</td>
            <td class="stat_base">{{item.curr('mnd')}}</td>

            <td class="stat_synergy">{{item.syn('atk')}}</td>
            <td class="stat_synergy">{{item.syn('mag')}}</td>
            <td class="stat_synergy">{{item.syn('acc')}}</td>
            <td class="stat_synergy">{{item.syn('def')}}</td>
            <td class="stat_synergy">{{item.syn('res')}}</td>
            <td class="stat_synergy">{{item.syn('eva')}}</td>
            <td class="stat_synergy">{{item.syn('mnd')}}</td>

            <td><a href="" ng-click="app.removeItem(item)"><i class="fa fa-times"></i></a></td>
        </tr>
    </table>
</div>
</body>

</html>